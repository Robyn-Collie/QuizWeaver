{% extends "base.html" %}
{% block title %}{{ class_obj.name }} - QuizWeaver{% endblock %}

{% block content %}
<h1>{{ class_obj.name }}</h1>

<div class="class-info">
    {% if class_obj.grade_level %}<p><strong>Grade:</strong> {{ class_obj.grade_level }}</p>{% endif %}
    {% if class_obj.subject %}<p><strong>Subject:</strong> {{ class_obj.subject }}</p>{% endif %}
</div>

<div class="section-actions">
    <a href="/classes/{{ class_obj.id }}/lessons" class="btn btn-secondary">View Lessons</a>
    <a href="/classes/{{ class_obj.id }}/lessons/new" class="btn btn-primary" title="Record what you taught today â€” this helps QuizWeaver generate better quizzes and study materials tailored to your instruction">Log Lesson</a>
    <a href="/classes/{{ class_obj.id }}/quizzes" class="btn btn-secondary">View Quizzes</a>
    <a href="/classes/{{ class_obj.id }}/generate" class="btn btn-primary">Generate Quiz</a>
    <a href="/classes/{{ class_obj.id }}/analytics" class="btn btn-primary">Performance Analytics</a>
    <a href="/classes/{{ class_obj.id }}/edit" class="btn btn-secondary">Edit Class</a>
    <form method="POST" action="/classes/{{ class_obj.id }}/delete" class="inline-form" onsubmit="return confirm('Delete this class? This cannot be undone.')">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
        <button type="submit" class="btn btn-danger">Delete Class</button>
    </form>
</div>

{% if knowledge %}
<h2>Assumed Knowledge</h2>
<table class="data-table">
    <thead>
        <tr>
            <th>Topic</th>
            <th>Depth</th>
            <th>Last Taught</th>
            <th>Mentions</th>
        </tr>
    </thead>
    <tbody>
        {% for topic, data in knowledge.items() %}
        <tr>
            <td>{{ topic }}</td>
            <td>{{ data.depth }}</td>
            <td>{{ data.last_taught }}</td>
            <td>{{ data.mention_count }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}

<h2>Recent Lessons</h2>
{% if lessons %}
<ul class="lesson-list">
    {% for lesson in lessons[:5] %}
    <li>
        <strong>{{ lesson.date }}</strong>
        {% if lesson.notes %} - {{ lesson.notes }}{% endif %}
    </li>
    {% endfor %}
</ul>
{% else %}
<p>No lessons logged yet.</p>
{% endif %}
{% endblock %}
