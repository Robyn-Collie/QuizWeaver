{% extends "base.html" %}
{% block title %}Log Lesson - {{ class_obj.name }} - QuizWeaver{% endblock %}

{% block content %}
<h1>Log Lesson - {{ class_obj.name }}</h1>

<div class="ai-notice ai-notice-privacy" data-dismiss-key="lesson-privacy">
    <button class="ai-notice-dismiss" aria-label="Dismiss notice" title="Dismiss">&times;</button>
    <strong>Privacy Notice:</strong> Lesson content you enter here may be sent to your configured AI provider when generating quizzes, study materials, or other content. <strong>Do not include student names or personally identifying information.</strong>
    <br><small>Learn more: <a href="/help#understanding-ai">Understanding AI in QuizWeaver</a></small>
</div>

<div class="info-banner">
    <strong>Why log lessons?</strong> Logging what you teach helps QuizWeaver generate better, more relevant quizzes and study materials aligned to your actual instruction. The more context QuizWeaver has about your teaching, the more accurate and useful its AI-generated content will be.
</div>

<form method="POST" action="/classes/{{ class_obj.id }}/lessons/new" class="form" enctype="multipart/form-data">
    <div class="form-group">
        <label for="lesson_date">Lesson Date</label>
        <input type="date" id="lesson_date" name="lesson_date" value="{{ today }}">
    </div>
    <div class="form-group">
        <label for="content">Lesson Content <span class="help-tip" data-tip="Describe what you taught - topics are auto-detected from this text and used for quiz generation">?</span></label>
        <textarea id="content" name="content" rows="6" required placeholder="What did you teach today? Include topics, activities, and key concepts covered."></textarea>
    </div>
    <div class="form-group">
        <label for="topics">Topics (comma-separated, optional - auto-detected if blank) <span class="help-tip" data-tip="Leave blank for auto-detection, or enter topics manually separated by commas">?</span></label>
        <input type="text" id="topics" name="topics" placeholder="e.g., photosynthesis, cell division">
    </div>
    <div class="form-group">
        <label for="notes">Teacher Notes (optional)</label>
        <textarea id="notes" name="notes" rows="3" placeholder="Observations, student engagement, areas to revisit..."></textarea>
    </div>
    <div class="form-group">
        <label for="lesson_file">Upload Lesson File (optional, PDF or DOCX)</label>
        <input type="file" id="lesson_file" name="lesson_file" accept=".pdf,.docx">
    </div>
    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Log Lesson</button>
        <a href="/classes/{{ class_obj.id }}/lessons" class="btn btn-secondary">Cancel</a>
    </div>
</form>
{% endblock %}
