{% extends "base.html" %}
{% block title %}Generate Variant - {{ quiz.title }} - QuizWeaver{% endblock %}

{% block content %}
<h1>Generate Reading-Level Variant</h1>
<p>Create a variant of <strong><a href="/quizzes/{{ quiz.id }}">{{ quiz.title }}</a></strong> at a different reading level.</p>

{% if error is defined and error %}
<div class="alert alert-error">{{ error }}</div>
{% endif %}

<form method="POST" class="form" id="variant-form"
      data-loading-form
      data-loading-title="Generating Variant..."
      data-loading-message="Adapting questions to the selected reading level. This may take 10-30 seconds."
      data-loading-btn-text="Generating...">
    <div class="form-group">
        <label>Reading Level</label>
        <div class="reading-level-options">
            {% for key, desc in reading_levels.items() %}
            <label class="reading-level-option">
                <input type="radio" name="reading_level" value="{{ key }}" {% if key == 'on_grade' %}checked{% endif %}>
                <span class="reading-level-card reading-level-{{ key }}">
                    <strong>{{ key|replace('_', ' ')|title }}</strong>
                    <span>{{ desc }}</span>
                </span>
            </label>
            {% endfor %}
        </div>
    </div>

    <div class="form-group">
        <label>Title (optional)</label>
        <input type="text" name="title" placeholder="Auto-generated if left blank">
    </div>

    {% include "partials/provider_select.html" %}

    <div class="form-actions">
        <button type="submit" class="btn btn-primary" id="generate-btn">Generate Variant</button>
        <a href="/quizzes/{{ quiz.id }}" class="btn btn-secondary">Cancel</a>
    </div>
</form>

{% endblock %}
